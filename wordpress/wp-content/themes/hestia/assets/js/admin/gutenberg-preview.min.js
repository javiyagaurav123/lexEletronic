!function(s){s.hestiaGutenberg={init:function(){this.manipulateDom(),this.setupFeaturedImage(),this.setupSidebar(hestiaGtb.sidebarLayout),this.handleMetabox(),this.resizeTitle()},handleMetabox:function(){var e,t=this;s("#hestia-page-settings #control-hestia_layout_select label").on("click",function(){e=s(this).prev().val(),t.toggleEditorClasses("sidebar",e),t.setupSidebar(e)}),s("#hestia-page-settings #control-hestia_layout_select .reset-data").on("click",function(){e=s(this).data("default"),t.toggleEditorClasses("sidebar",e),t.setupSidebar(e)}),s("#hestia-page-settings #control-hestia_header_layout label").on("click",function(){e=s(this).prev().val(),t.toggleEditorClasses("header",e)}),s("#hestia-page-settings #control-hestia_header_layout .reset-data").on("click",function(){e=s(this).data("default"),t.toggleEditorClasses("header",e)})},toggleEditorClasses:function(e,t){var a,i=s(".hestia-gtb");if(s(i).hasClass(e+"-"+t))return!1;a="header"===e?"header-default header-no-content header-classic-blog":"sidebar-sidebar-right sidebar-sidebar-left sidebar-full-width",s(i).removeClass(a),s(i).addClass(e+"-"+t),this.resizeTitle()},resizeTitle:function(){jQuery(".editor-post-title__input").focus().blur()},manipulateDom:function(){var e=s(".editor-styles-wrapper"),t=s(".editor-styles-wrapper .editor-block-list__layout"),a="hestia-gtb  header-"+hestiaGtb.headerLayout+" sidebar-"+hestiaGtb.sidebarLayout;s(e).addClass(a),s(t).prev().addClass("hestia-featured-background title-container"),s(".editor-styles-wrapper > .editor-writing-flow > div:first-child > div").wrap('<div class="hestia-writing-flow-inside"></div>'),s(".hestia-gtb").prepend('<div class="hestia-featured-background no-content"></div>'),s(".editor-writing-flow .editor-post-title").append('<div class="wp-block hestia-featured-background classic-blog-featured"></div>'),s(t).wrap('<div class="hestia-block-list-wrap"></div>')},setupSidebar:function(e){s(".hestia-sidebar-dummy").remove();var t=s(".hestia-block-list-wrap"),a=s(".hestia-writing-flow-inside");switch(e){default:case"full-width":break;case"sidebar-left":s(t).prepend(this.getSidebarMarkup("left")),s(a).prepend(this.getSidebarMarkup("left",!0));break;case"sidebar-right":s(t).append(this.getSidebarMarkup("right")),s(a).append(this.getSidebarMarkup("right",!0))}},getSidebarMarkup:function(e,t){return!0===(t=void 0!==t&&t)&&(e+=" full-width"),'<div class="hestia-sidebar-dummy '+e+'">'+hestiaGtb.strings.sidebar+"</div>"},setupFeaturedImage:function(){if("yes"===hestiaGtb.headerSitewide)return 0<hestiaGtb.headerImage.length&&"remove-header"!==hestiaGtb.headerImage&&this.setFeaturedImage(hestiaGtb.headerImage),!1;0<hestiaGtb.featuredImage.length&&this.setFeaturedImage(hestiaGtb.featuredImage);var a=this,e=new MutationObserver(function(e){e.forEach(function(e){if("editor-post-featured-image"===e.target.className){var t=s(e.target).find("img").attr("src");return void 0!==t?a.setFeaturedImage(t):a.setFeaturedImage(null),!1}})}),t=s(".edit-post-layout");e.observe(t[0],{childList:!0,subtree:!0})},setFeaturedImage:function(e){var t=s(".hestia-featured-background");if(null===e)return s(t).removeAttr("style"),s(".hestia-gtb").removeClass("has-featured-image"),!1;s(t).css({"background-image":"url("+e+")"}),s(".hestia-gtb").addClass("has-featured-image")}}}(jQuery),jQuery(window).load(function(){jQuery.hestiaGutenberg.init()});